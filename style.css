@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&family=Roboto:wght@400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css');

:root {
    --font-primary: 'Roboto', 'M PLUS Rounded 1c', sans-serif;
    --font-accent: 'M PLUS Rounded 1c', sans-serif;
    --font-ui-quiz: 'Poppins', 'M PLUS Rounded 1c', sans-serif;

    --color-primary: #3A7BD5; 
    --color-primary-dark: #2a5a9a;
    --color-secondary: #00A8A8; 
    --color-accent: #FFA000; 
    --color-success: #28a745;
    --color-danger: #dc3545;
    --color-warning: #ffc107;
    --color-info: #17a2b8;

    --color-primary-rgb: 58, 123, 213;
    --color-secondary-rgb: 0, 168, 168;
    --color-accent-rgb: 255, 160, 0;
    --color-warning-rgb: 255, 193, 7;
    --color-info-rgb: 23, 162, 184;
    --color-danger-rgb: 220, 53, 69;


    --text-dark: #212529;
    --text-medium: #495057;
    --text-light: #6c757d;
    --text-on-primary: #ffffff;
    --text-on-secondary: #ffffff;
    --text-on-accent-quiz: #ffffff;

    --bg-main: #f4f7f9; 
    --bg-card: #ffffff;
    --bg-header: #ffffff;
    --bg-modal: #ffffff;
    --bg-input: #f8f9fa;

    --quiz-color-surface-raised: #ffffff;
    --quiz-color-surface-interactive: #f8f9fa;
    --quiz-color-accent-primary: #007bff;
    --quiz-color-accent-secondary: #ffc107;
    --quiz-color-correct: #20c997;  
    --quiz-color-wrong: #fa5252;   
    --quiz-color-border-subtle: #dbe0e6;  
    --quiz-color-border-interactive: #ced4da;

    --border-color-light: #e0e0e0;
    --border-color-dark: #ced4da;
    --border-radius-sm: 0.25rem;
    --border-radius-md: 0.5rem;
    --border-radius-lg: 0.8rem;
    --border-radius-xl: 1.25rem;
    --border-radius-pill: 50rem;

    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.03);
    --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 15px 40px rgba(0,0,0,0.1);

    --transition-fast: 0.15s ease-out;
    --transition-medium: 0.25s ease-out;
    --transition-slow: 0.4s ease-out;
    --transition-quiz-timing: cubic-bezier(0.4, 0, 0.2, 1);

    --max-width-container: 800px;
    --spacing-unit: 8px;
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
}

* { 
    box-sizing: border-box; 
    margin: 0; 
    padding: 0; 
    -webkit-font-smoothing: antialiased; 
    -moz-osx-font-smoothing: grayscale; 
}
html { 
    scroll-behavior: smooth; 
    font-size: 16px; 
    height: 100%; 
}

body {
    font-family: var(--font-primary);
    background-color: var(--bg-main);
    color: var(--text-dark);
    line-height: 1.6;
    display: flex;
    flex-direction: column; 
    justify-content: center; 
    align-items: center;
    min-height: 100vh;
    padding: var(--spacing-sm);
    position: relative;
}

#app-background-gradient {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        135deg, 
        var(--color-primary) 0%, 
        var(--color-secondary) 100%
    );
    opacity: 0.08;
    z-index: -1;
    pointer-events: none;
}

#difficulty-selection-screen {
    width: 100%;
    max-width: 600px;
    background-color: var(--bg-card);
    padding: var(--spacing-xl);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg);
    text-align: center;
    display: flex; 
    flex-direction: column;
    align-items: center;
    border: 1px solid var(--border-color-light);
    transition: opacity var(--transition-slow), transform var(--transition-slow);
}
#difficulty-selection-screen.hidden {
    opacity: 0;
    transform: scale(0.95);
    pointer-events: none;
    display: none;
}
.difficulty-content { width: 100%; }
.difficulty-title {
    font-family: var(--font-accent); font-weight: 800; font-size: 2.2em;
    color: var(--color-primary); letter-spacing: 0.5px; line-height: 1.2;
    margin-bottom: var(--spacing-xs);
}
.difficulty-subtitle {
    font-family: var(--font-accent); font-weight: 500; font-size: 0.95em;
    color: var(--text-medium); display: block; margin-bottom: var(--spacing-lg);
    letter-spacing: 0.2px;
}
#difficulty-selection-screen h2 {
    font-family: var(--font-accent); font-weight: 700; font-size: 1.5em;
    color: var(--text-dark); margin-bottom: var(--spacing-lg);
}
.difficulty-buttons {
    display: flex; flex-direction: column; gap: var(--spacing-md);
    width: 100%; max-width: 400px; margin: 0 auto;
}
.button-difficulty {
    padding: var(--spacing-md) var(--spacing-lg); font-family: var(--font-accent);
    font-size: 1.1em; font-weight: 700; color: var(--text-on-primary);
    border: none; border-radius: var(--border-radius-md); cursor: pointer;
    transition: all var(--transition-medium); box-shadow: var(--shadow-sm);
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; text-align: center; line-height: 1.4;
}
.button-difficulty i { font-size: 1.5em; margin-bottom: var(--spacing-xs); }
.button-difficulty small { font-size: 0.75em; font-weight: 400; opacity: 0.9; margin-top: var(--spacing-xs); }
#select-easy { background: linear-gradient(45deg, var(--color-success), #239b3f); }
#select-easy:hover { filter: brightness(1.1); box-shadow: var(--shadow-md); transform: translateY(-2px); }
#select-hard { background: linear-gradient(45deg, var(--color-danger), #c22a38); }
#select-hard:hover { filter: brightness(1.1); box-shadow: var(--shadow-md); transform: translateY(-2px); }

.game-container {
    width: 100%;
    max-width: var(--max-width-container);
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    background-color: rgba(255,255,255,0.85);
    backdrop-filter: blur(12px) saturate(120%);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
    padding: var(--spacing-sm);
    border: 1px solid rgba(var(--color-primary-rgb), 0.2);
    transition: opacity var(--transition-slow), transform var(--transition-slow);
}
.game-container.hidden {
    opacity: 0;
    transform: scale(0.95);
    pointer-events: none;
    display: none; 
}

.game-header {
    background-color: var(--bg-header); padding: var(--spacing-md);
    border-radius: var(--border-radius-md); box-shadow: var(--shadow-sm);
    margin-bottom: var(--spacing-lg); border: 1px solid var(--border-color-light);
}
.header-title-wrapper { text-align: center; margin-bottom: var(--spacing-md); }
.game-main-title {
    font-family: var(--font-accent); font-weight: 800; font-size: 2em;
    color: var(--color-primary); letter-spacing: 0.5px; line-height: 1.2;
}
.game-subtitle {
    font-family: var(--font-accent); font-weight: 500; font-size: 0.9em;
    color: var(--text-medium); display: block; margin-top: var(--spacing-xs);
    letter-spacing: 0.2px;
}
.header-info-bar {
    display: flex; flex-wrap: wrap; justify-content: space-between;
    align-items: center; gap: var(--spacing-sm);
}
.info-item {
    font-size: 0.85em; color: var(--text-medium); font-weight: 500;
    display: flex; align-items: center; background-color: var(--bg-main);
    padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--border-radius-sm);
    border: 1px solid var(--border-color-light);
    flex-shrink: 0;
}
.info-item i { margin-right: var(--spacing-xs); color: var(--color-secondary); }
.info-item span span { color: var(--text-dark); font-weight: 700; }
#max-days-display { color: var(--text-dark); font-weight: 700; }

.button-primary {
    padding: var(--spacing-sm) var(--spacing-md); font-family: var(--font-accent);
    font-size: 0.9em; font-weight: 700; color: var(--text-on-primary);
    background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
    border: none; border-radius: var(--border-radius-pill); cursor: pointer;
    transition: all var(--transition-medium); box-shadow: var(--shadow-xs);
    display: inline-flex; align-items: center; justify-content: center; text-decoration: none;
}
.button-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-sm); filter: brightness(1.1); }
.button-primary:active { transform: translateY(0); box-shadow: var(--shadow-xs); }
.button-primary:disabled { background: var(--text-light) !important; color: #888 !important; cursor: not-allowed; opacity: 0.7; transform: none; box-shadow: none; }
.button-primary i { margin-right: var(--spacing-xs); }

.shop-open-button { 
    font-size: 0.85em; 
    padding: calc(var(--spacing-sm) * 0.9) calc(var(--spacing-md) * 0.9);
    margin-left: auto; 
}

.button-icon {
    background-color: transparent;
    border: 1px solid var(--border-color-light);
    color: var(--text-medium);
    padding: calc(var(--spacing-sm) * 0.8);
    border-radius: var(--border-radius-md);
    font-size: 1.1em;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    width: auto; 
    min-width: calc(var(--spacing-unit) * 4.5);
    min-height: calc(var(--spacing-unit) * 4.5);
}
.button-icon:hover {
    background-color: var(--bg-input);
    border-color: var(--border-color-dark);
    color: var(--color-primary);
}
.button-icon:disabled {
    color: var(--text-light) !important;
    background-color: var(--bg-input) !important;
    border-color: var(--border-color-light) !important;
    opacity: 0.6;
    cursor: not-allowed;
}
.header-quiz-button {
    margin-right: var(--spacing-sm);
}
.header-quiz-button i { color: var(--color-accent); }
.header-quiz-button:hover i { color: var(--color-primary); }
.header-quiz-button:disabled i { color: var(--text-light) !important; }

.event-notification-area {
    background-color: rgba(var(--color-warning-rgb), 0.15); 
    color: #856404; border: 1px solid rgba(var(--color-warning-rgb), 0.3);
    padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--border-radius-md);
    margin-bottom: var(--spacing-lg); text-align: center; font-weight: 500;
    font-size: 0.9em; box-shadow: var(--shadow-xs);
    animation: fadeInSlideDownBanner 0.4s var(--transition-slow);
}
@keyframes fadeInSlideDownBanner { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }

.game-container.event-flash-highlight { animation: screenFlash 0.7s ease-out 1; }
@keyframes screenFlash {
    0%, 100% { box-shadow: var(--shadow-md); outline: none; }
    50% { box-shadow: 0 0 35px 12px rgba(var(--color-info-rgb), 0.6); outline: 3px solid rgba(var(--color-info-rgb), 0.5); }
}

.game-main-content { display: grid; gap: var(--spacing-lg); }
section {
    background: var(--bg-card); border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-sm); padding: var(--spacing-md);
    border: 1px solid var(--border-color-light);
}
section h2 {
    font-family: var(--font-accent); font-weight: 700; font-size: 1.25em;
    color: var(--color-primary); margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--color-secondary);
    display: flex; align-items: center;
}
section h2 i { margin-right: var(--spacing-sm); font-size: 0.9em; }

.status-and-character-section { display: grid; grid-template-columns: 0.8fr 1.2fr; gap: var(--spacing-lg); align-items: flex-start; }
.character-display { position: relative; display: flex; flex-direction: column; align-items: center; margin-top: var(--spacing-sm); }
.character-image-container {
    width: 140px; height: 140px; border-radius: 50%;
    background: linear-gradient(135deg, var(--bg-main), #e9eef2);
    padding: var(--spacing-xs); box-shadow: var(--shadow-md); 
    display: flex; justify-content: center; align-items: center;
    transition: transform var(--transition-medium);
}
.character-image-container:hover { transform: scale(1.03) rotate(2deg); }
#shiro-image { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 3px solid var(--bg-card); }
.shiro-image-changed { animation: shiro-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes shiro-pop { 0% { transform: scale(0.95); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }

.thought-bubble {
    position: absolute; top: -10px; left: 50%;
    transform: translateX(-50%) translateY(-100%) scale(0.9);
    background-color: var(--bg-card); color: var(--color-primary);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-md) var(--border-radius-md) var(--border-radius-md) var(--border-radius-xs);
    font-size: 0.8em; font-weight: 500; box-shadow: var(--shadow-sm);
    z-index: 10; opacity: 0; white-space: nowrap;
    transition: opacity var(--transition-medium), transform var(--transition-medium);
    border: 1px solid var(--border-color-dark); max-width: 150px; text-align: center;
}
.thought-bubble.show { opacity: 1; transform: translateX(-50%) translateY(-105%) scale(1); }
.thought-bubble.success { color: var(--color-success); border-color: var(--color-success); background-color: rgba(40,167,69,0.05); }
.thought-bubble.failure { color: var(--color-danger); border-color: var(--color-danger); background-color: rgba(220,53,69,0.05); }

.status-grid h2 { font-size: 1.15em; border-bottom-width: 1px; border-color: var(--border-color-light); }
.params { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: var(--spacing-sm); }
.params p[data-param] {
    font-size: 0.85em; color: var(--text-medium); background-color: var(--bg-main);
    padding: var(--spacing-sm); border-radius: var(--border-radius-sm);
    display: flex; align-items: center; border: 1px solid var(--border-color-light);
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}
.params p[data-param]:hover { background-color: #e9ecef; transform: translateY(-1px); }
.params p[data-param] i { margin-right: var(--spacing-sm); color: var(--color-secondary); font-size: 1em; width: 18px; text-align: center; }
.params p[data-param] span { font-weight: 700; color: var(--text-dark); font-size: 1.1em; margin-left: auto; transition: color 0.2s ease-in-out; }
.params p[data-param].param-value-increased span { animation: value-pop-text 0.35s ease-out; color: var(--color-success); }
.params p[data-param].param-value-decreased span { animation: value-pop-text 0.35s ease-out; color: var(--color-danger); }
@keyframes value-pop-text { 50% { transform: scale(1.15); } }
.params p[data-param].flash-positive { border-left: 3px solid var(--color-success) !important; background-color: rgba(40,167,69,0.03) !important; }
.params p[data-param].flash-negative { border-left: 3px solid var(--color-danger) !important; background-color: rgba(220,53,69,0.03) !important; }

.inventory-display { margin-top: var(--spacing-md); }
.inventory-display h3 {
    font-size: 1em; color: var(--text-medium); margin-bottom: var(--spacing-sm);
    font-weight: 500; padding-bottom: var(--spacing-xs);
    border-bottom: 1px dashed var(--border-color-light); display: flex; align-items: center;
}
.inventory-display h3 i { margin-right: var(--spacing-xs); color: var(--color-secondary); }
#inventory-list { list-style: none; padding: 0; max-height: 100px; overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--color-secondary) var(--bg-main); }
#inventory-list::-webkit-scrollbar { width: 6px; }
#inventory-list::-webkit-scrollbar-track { background: var(--bg-main); border-radius: 3px; }
#inventory-list::-webkit-scrollbar-thumb { background-color: var(--color-secondary); border-radius: 3px; }
#inventory-list li {
    font-size: 0.85em; padding: var(--spacing-xs) var(--spacing-sm);
    color: var(--text-dark); border-bottom: 1px solid #f5f5f5;
    display: flex; justify-content: space-between; align-items: center;
    transition: background-color var(--transition-fast);
}
#inventory-list li:hover { background-color: #eef4f8; }
#inventory-list li:last-child { border-bottom: none; }
#inventory-list .no-items { font-style: italic; color: var(--text-light); text-align: center; padding: var(--spacing-sm) 0; }
.item-name-qty { flex-grow: 1; }
.item-name-qty .item-quantity { font-size: 0.8em; color: var(--text-light); margin-left: var(--spacing-xs); }
.use-item-button {
    padding: var(--spacing-xs) var(--spacing-sm); font-size: 0.8em;
    font-weight: 700; color: var(--text-on-secondary);
    background-color: var(--color-accent); border: none;
    border-radius: var(--border-radius-pill); cursor: pointer;
    transition: all var(--transition-fast); margin-left: var(--spacing-sm); white-space: nowrap;
}
.use-item-button:hover { background-color: #e68a00; transform: scale(1.05); }
.use-item-button:disabled { background-color: #c5c5c5; cursor: not-allowed; opacity: 0.7; transform: none; }
.item-used-flash { animation: item-flash-bg 0.6s ease-out; }
@keyframes item-flash-bg { 50% { background-color: rgba(var(--color-accent-rgb), 0.1); } }

.action-buttons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: var(--spacing-sm); }
.action-buttons-grid button {
    padding: var(--spacing-md); font-family: var(--font-primary);
    font-size: 0.95em; font-weight: 500; color: var(--color-primary-dark); 
    background-color: rgba(var(--color-primary-rgb), 0.08); 
    border: 1px solid rgba(var(--color-primary-rgb), 0.2);
    border-radius: var(--border-radius-md); cursor: pointer;
    transition: all var(--transition-medium); box-shadow: var(--shadow-xs);
    text-align: left; display: flex; align-items: center;
    min-height: 50px;
}
.action-buttons-grid button i { margin-right: var(--spacing-sm); font-size: 1.1em; width: 20px; text-align: center; color: var(--color-primary); }
.action-buttons-grid button:hover {
    background-color: rgba(var(--color-primary-rgb), 0.15);
    border-color: rgba(var(--color-primary-rgb), 0.4);
    transform: translateY(-2px) scale(1.01); box-shadow: var(--shadow-sm);
}
.action-buttons-grid button:active { transform: translateY(0) scale(1); box-shadow: var(--shadow-xs); }
.action-buttons-grid button:disabled {
    background: var(--bg-input) !important; color: var(--text-light) !important;
    border-color: var(--border-color-light) !important; cursor: not-allowed;
    transform: none; box-shadow: none;
}
.action-buttons-grid button.action-sleep { 
    background-color: rgba(var(--color-secondary-rgb), 0.08);
    border-color: rgba(var(--color-secondary-rgb), 0.2);
    color: #00796b; 
}
.action-buttons-grid button.action-sleep i { color: var(--color-secondary); }
.action-buttons-grid button.action-sleep:hover {
    background-color: rgba(var(--color-secondary-rgb), 0.15);
    border-color: rgba(var(--color-secondary-rgb), 0.4);
}

.log-section { min-height: 120px; }
#log-message-area {
    background-color: var(--bg-input); padding: var(--spacing-sm);
    border-radius: var(--border-radius-sm); font-size: 0.9em;
    color: var(--text-dark); line-height: 1.7; max-height: 200px; 
    overflow-y: auto; border: 1px solid var(--border-color-light);
    scrollbar-width: thin; scrollbar-color: var(--color-secondary) #dddddd;
}
#log-message-area::-webkit-scrollbar { width: 6px; }
#log-message-area::-webkit-scrollbar-track { background: #dddddd; border-radius: 3px; }
#log-message-area::-webkit-scrollbar-thumb { background-color: var(--color-secondary); border-radius: 3px; }

/* --- Log Entry Styling --- */
#log-message .log-entry {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    border-left: 3px solid var(--border-color-light);
    border-radius: var(--border-radius-sm);
}
#log-message .log-entry:last-child {
    margin-bottom: 0;
}
#log-message .log-type-action {
    border-left-color: var(--color-primary);
    background-color: rgba(var(--color-primary-rgb), 0.03);
}
#log-message .log-type-action strong:first-child { /* Action title like "基本書を読む" */
    color: var(--color-primary-dark); 
    font-weight: 700;
}
#log-message .log-type-item-transaction {
    border-left-color: var(--color-accent);
    background-color: rgba(var(--color-accent-rgb), 0.03);
}
#log-message .log-type-quiz-result {
    border-left-color: var(--color-info);
    background-color: rgba(var(--color-info-rgb), 0.03);
}
#log-message .log-type-summary { /* End of day summary */
    border-left-color: var(--text-light);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-xs);
    font-size: 0.85em;
    color: var(--text-medium);
}
#log-message .log-type-new-day {
    border-left-color: var(--color-secondary);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-sm);
    border-top: 1px dashed var(--border-color-light);
}
#log-message .log-type-system-critical,
#log-message .log-type-game-over-action {
    border-left-color: var(--color-danger);
    background-color: rgba(var(--color-danger-rgb), 0.05);
    font-weight: 500;
}
/* --- End Log Entry Styling --- */

#log-message strong { color: var(--color-primary); font-weight: 700; }
#log-message .positive { color: var(--color-success); font-weight: 500; }
#log-message .negative { color: var(--color-danger); font-weight: 500; }
#log-message .neutral { color: var(--color-warning); font-weight: 500; }
#log-message .item { color: var(--color-accent); font-style: italic; font-weight: 500; }

.log-event-highlight { 
    background-color: rgba(var(--color-info-rgb), 0.08); 
    border: 1px solid rgba(var(--color-info-rgb), 0.2);
    border-left: 4px solid var(--color-info) !important; /* Override .log-entry */
    padding: var(--spacing-xs) var(--spacing-sm);
    margin: var(--spacing-sm) calc(var(--spacing-sm) * -1); /* Negative margin to span wider if inside .log-entry */
    border-radius: var(--border-radius-sm);
}
.log-event-highlight strong { color: var(--color-info); }


.game-footer {
    text-align: center; margin-top: var(--spacing-lg);
    padding-top: var(--spacing-md); border-top: 1px solid var(--border-color-light);
    font-size: 0.75em; color: var(--text-light); opacity: 0.8;
}

.modal {
    position: fixed; z-index: 1000; left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.65); 
    backdrop-filter: blur(6px);
    display: flex; justify-content: center; align-items: center;
    opacity: 0; visibility: hidden;
    transition: opacity var(--transition-medium), visibility 0s var(--transition-medium);
    padding: var(--spacing-sm);
}
.modal.show { opacity: 1; visibility: visible; transition-delay: 0s; }
.modal-content {
    background-color: var(--bg-modal);
    padding: var(--spacing-lg) var(--spacing-xl); 
    border-radius: var(--border-radius-lg); 
    box-shadow: var(--shadow-lg);
    width: 100%; max-width: 500px; 
    max-height: 90vh; 
    overflow-y: auto; 
    text-align: center; position: relative;
    transform: translateY(-25px) scale(0.95);
    transition: transform var(--transition-slow) cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                opacity var(--transition-medium);
    border: 1px solid var(--border-color-light);
}
.modal.show .modal-content { transform: translateY(0) scale(1); }
.modal-close-button {
    position: absolute; top: var(--spacing-sm); right: var(--spacing-sm);
    font-size: 2em; font-weight: 300; color: var(--text-light);
    background: none; border: none; cursor: pointer;
    line-height: 1; padding: var(--spacing-xs);
    transition: color var(--transition-fast), transform var(--transition-fast);
    z-index: 10;
}
.modal-close-button:hover { color: var(--color-danger); transform: rotate(90deg) scale(1.1); }
.modal-content h2 {
    font-family: var(--font-accent); color: var(--color-primary);
    margin-bottom: var(--spacing-md); font-size: 1.5em; font-weight: 700;
}
.modal-content h2 i { margin-right: var(--spacing-sm); }
.modal-character-image {
    margin: var(--spacing-md) auto; padding: var(--spacing-xs);
    background: linear-gradient(135deg, var(--bg-main), #e9eef2);
    border-radius: 50%; width: 120px; height: 120px;
    display: flex; justify-content: center; align-items: center;
    box-shadow: var(--shadow-sm);
}
#exam-shiro-image { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 3px solid var(--bg-card); }
.modal-content p { font-size: 0.95em; margin-bottom: var(--spacing-sm); color: var(--text-medium); line-height: 1.7; }
.loading-indicator p { margin-bottom: var(--spacing-md); }
.result-narrative { font-size: 1.05em !important; color: var(--text-dark) !important; margin: var(--spacing-md) 0 !important; min-height: 70px; }
.result-divider { border:0; height:1px; background-image:linear-gradient(to right, rgba(0,0,0,0), var(--border-color-dark), rgba(0,0,0,0)); margin:var(--spacing-md) 0; }
.fiction-title { font-weight:700; color:var(--color-primary); margin-bottom:var(--spacing-xs) !important; font-size:1em !important; }
.fiction-body { font-size:.9em !important; font-style:italic; color:var(--text-medium) !important; line-height:1.6 !important; margin-bottom:var(--spacing-sm) !important; }
.fiction-disclaimer { font-size:.75em !important; color:var(--text-light) !important; opacity:.9; margin-top:var(--spacing-sm) !important; }
#restart-game-button { margin-top:var(--spacing-md); background:var(--color-success); }
#restart-game-button:hover { background: #1e7e34; }
.spinner { width:40px; height:40px; border:4px solid rgba(0,0,0,0.1); border-top-color:var(--color-primary); border-radius:50%; animation:spin .8s linear infinite; margin:var(--spacing-md) auto; }
@keyframes spin { to { transform: rotate(360deg); } }
.shop-info { font-weight:500; margin-bottom:var(--spacing-md); display:block; color:var(--text-medium); font-size:1em; }
.shop-info span { color:var(--color-primary); font-weight:700; }
#item-shop-list.item-shop-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:var(--spacing-md); margin-top:var(--spacing-md); max-height:60vh; overflow-y:auto; padding:var(--spacing-xs); scrollbar-width:thin; scrollbar-color:var(--color-accent) var(--bg-main); }
#item-shop-list::-webkit-scrollbar { width:6px; }
#item-shop-list::-webkit-scrollbar-track { background:var(--bg-main); border-radius:3px; }
#item-shop-list::-webkit-scrollbar-thumb { background-color:var(--color-accent); border-radius:3px; }
.item-card { background-color:var(--bg-card); padding:var(--spacing-md); border-radius:var(--border-radius-md); border:1px solid var(--border-color-light); transition:transform var(--transition-medium), box-shadow var(--transition-medium); display:flex; flex-direction:column; box-shadow:var(--shadow-xs); }
.item-card:hover { transform:translateY(-3px); box-shadow:var(--shadow-md); }
.item-card h4 { font-size:1.05em; color:var(--color-primary); margin-bottom:var(--spacing-xs); font-weight:700; font-family:var(--font-accent); }
.item-card h4 i { margin-right:var(--spacing-xs); }
.item-card p { font-size:.8em; color:var(--text-medium); margin-bottom:var(--spacing-sm); flex-grow:1; min-height:3em; }
.item-card .item-price { font-weight:700; color:var(--color-secondary); margin-bottom:var(--spacing-sm); font-size:.95em; }
.item-card .item-price i { margin-right:var(--spacing-xs); }
.item-card .buy-item-button { width:100%; margin-top:auto; background:var(--color-accent); }
.item-card .buy-item-button:hover { background: #e68a00; }
.item-card .buy-item-button:disabled { background:var(--text-light) !important; }

#daily-quiz-modal .quiz-modal-content {
    max-width: 700px;
    padding: var(--spacing-md);
}
#daily-quiz-modal .quiz-header-internal {
    padding: var(--spacing-md) var(--spacing-md) var(--spacing-sm);
    text-align: center;
    border-bottom: 1px solid var(--quiz-color-border-subtle);
    position: relative; 
}
#daily-quiz-modal .quiz-game-title {
    font-family: var(--font-ui-quiz);
    font-size: clamp(1.5rem, 4vw, 1.8rem);
    font-weight: 700; 
    color: var(--quiz-color-accent-primary);
    margin-bottom: var(--spacing-xs);
    line-height: 1.2;
    display: flex; 
    justify-content: center;
    align-items: baseline; 
    flex-wrap: wrap; 
}
#daily-quiz-modal .quiz-game-title .quiz-game-title-edition {
    font-family: var(--font-ui-quiz);
    background: linear-gradient(45deg, var(--quiz-color-accent-primary), var(--quiz-color-accent-secondary));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 700;
    margin-left: calc(var(--spacing-unit) * 0.5);
    font-size: 0.9em;
}
#daily-quiz-modal .quiz-header-info-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--spacing-sm);
    gap: var(--spacing-md);
}
#daily-quiz-modal .quiz-progress-info { flex-grow: 1; text-align: left; }
#daily-quiz-modal .quiz-current-score-display {
    font-family: var(--font-ui-quiz);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-medium);
    background-color: var(--bg-input);
    padding: calc(var(--spacing-unit) * 0.5) var(--spacing-unit);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-xs);
}
#daily-quiz-modal .quiz-current-score-display .quiz-score-icon { 
    color: var(--quiz-color-accent-secondary); 
    margin-right: calc(var(--spacing-unit) * 0.5);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
#daily-quiz-modal .quiz-current-score-display.score-updated .quiz-score-icon { transform: scale(1.3) rotate(15deg); }
#daily-quiz-modal #quiz-current-score-value { font-weight: 700; color: var(--text-dark); }
#daily-quiz-modal .quiz-progress-text { 
    font-size: 0.8rem; font-weight: 500; 
    color: var(--text-secondary); 
    margin-bottom: calc(var(--spacing-unit) * 0.5); 
}
#daily-quiz-modal .quiz-progress-bar-container { 
    width: 100%; height: 8px; background-color: #e9ecef; 
    border-radius: var(--border-radius-pill); overflow: hidden; 
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.07); 
}
#daily-quiz-modal #quiz-progress-bar { 
    width: 0%; height: 100%; 
    background: linear-gradient(90deg, var(--quiz-color-accent-primary) 0%, var(--quiz-color-accent-secondary) 100%); 
    border-radius: var(--border-radius-pill); 
    transition: width var(--transition-duration-normal) var(--transition-quiz-timing); 
}
#daily-quiz-modal .quiz-content-internal {
    padding: var(--spacing-md) var(--spacing-sm);
    flex-grow: 1;
}
#daily-quiz-modal .quiz-message-display-area { margin-bottom: var(--spacing-md); }
#daily-quiz-modal .quiz-message-bubble { 
    background: var(--quiz-color-surface-interactive); 
    color: var(--text-dark); 
    padding: var(--spacing-md) var(--spacing-lg); 
    border-radius: var(--border-radius-lg); 
    box-shadow: var(--shadow-sm); 
    position: relative; text-align: left; white-space: pre-wrap; 
    word-wrap: break-word; font-size: clamp(1rem, 2.8vw, 1.15rem); 
    font-weight: 500; line-height: 1.65; display: flex; 
    align-items: flex-start; border: 1px solid var(--quiz-color-border-subtle);
}
#daily-quiz-modal .quiz-message-quote-icon { 
    font-size: 1.1em; color: var(--quiz-color-accent-primary); 
    margin-right: var(--spacing-sm); margin-top: calc(var(--spacing-unit) * 0.25); 
    opacity: 0.8; flex-shrink: 0; 
}
#daily-quiz-modal #quiz-message-text-content { 
    flex-grow: 1; font-weight: 600; color: var(--text-dark); 
}
#daily-quiz-modal .quiz-choices-container { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--spacing-sm); 
    margin-bottom: var(--spacing-md); 
}
#daily-quiz-modal .quiz-choices-container button { 
    background-color: var(--quiz-color-surface-raised); 
    color: var(--text-dark); 
    border: 1px solid var(--quiz-color-border-interactive); 
    padding: var(--spacing-md);
    border-radius: var(--border-radius-md); 
    font-size: clamp(0.8rem, 2.5vw, 0.9rem); 
    font-weight: 600; font-family: var(--font-ui-quiz); cursor: pointer; 
    transition: all var(--transition-fast) var(--transition-quiz-timing); 
    text-align: center; word-break: break-word; line-height: 1.3; 
    min-height: 50px; display: flex; justify-content: center; align-items: center;
    box-shadow: var(--shadow-xs);
}
#daily-quiz-modal .quiz-choices-container button:hover:not(:disabled) { 
    border-color: var(--quiz-color-accent-primary); 
    color: var(--quiz-color-accent-primary); 
    background-color: var(--quiz-color-surface-interactive); 
    transform: translateY(-2px); box-shadow: var(--shadow-sm); 
}
#daily-quiz-modal .quiz-choices-container button:disabled { 
    opacity: 0.7; cursor: not-allowed; 
    background-color: #f1f3f5; box-shadow: none; 
}
#daily-quiz-modal .quiz-choices-container button.correct { 
    background-color: var(--quiz-color-correct); 
    border-color: #1c7430; color: var(--text-on-accent-quiz); 
    transform: scale(1.02); box-shadow: 0 3px 10px rgba(32, 201, 151, 0.3); 
}
#daily-quiz-modal .quiz-choices-container button.wrong { 
    background-color: var(--quiz-color-wrong); 
    border-color: #b02a37; color: var(--text-on-accent-quiz); 
    opacity: 0.85; box-shadow: 0 3px 10px rgba(250, 82, 82, 0.3); 
}
#daily-quiz-modal .quiz-choices-container button.reveal-correct:not(.correct) { 
    border: 2px solid var(--quiz-color-correct); 
    color: var(--quiz-color-correct); 
    background-color: #e6f9ee; 
}
#daily-quiz-modal .quiz-feedback-action-area { 
    text-align: center; margin-top: var(--spacing-md); min-height: 70px; 
}
#daily-quiz-modal .quiz-feedback-text {
    font-family: var(--font-ui-quiz); font-weight: 600; 
    font-size: clamp(0.95rem, 2.5vw, 1.1rem); 
    min-height: 1.5em; margin-bottom: var(--spacing-md); 
    transition: color var(--transition-fast) ease, opacity var(--transition-medium) ease, transform 0.3s var(--transition-quiz-timing); 
    opacity: 0; transform: translateY(8px); display: inline-block;
}
#daily-quiz-modal .quiz-feedback-text.visible { opacity: 1; transform: translateY(0); }
#daily-quiz-modal .quiz-feedback-text.correct { color: var(--quiz-color-correct); }
#daily-quiz-modal .quiz-feedback-text.wrong { color: var(--quiz-color-wrong); }
#daily-quiz-modal .quiz-feedback-text-shake { animation: feedbackTextShake 0.4s ease-in-out; }
@keyframes feedbackTextShake {
  0%, 100% { transform: translateX(0) translateY(0); }
  20%, 60% { transform: translateX(-3px) translateY(0); }
  40%, 80% { transform: translateX(3px) translateY(0); }
}
#daily-quiz-modal .quiz-action-button {
    background: var(--quiz-color-accent-primary); 
    color: var(--text-on-accent-quiz); 
    font-family: var(--font-ui-quiz); 
    padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3); 
    border: none; border-radius: var(--border-radius-pill); 
    font-size: clamp(0.85rem, 2vw, 0.95rem); 
    font-weight: 600; cursor: pointer; 
    transition: all var(--transition-fast) var(--transition-quiz-timing); 
    box-shadow: 0 3px 10px rgba(0, 122, 255, 0.2); 
    letter-spacing: 0.2px; 
    display: inline-flex; align-items: center; justify-content: center;
}
#daily-quiz-modal .quiz-action-button:hover { 
    background: #0069d9; 
    box-shadow: 0 5px 15px rgba(0, 122, 255, 0.28); 
    transform: translateY(-2px); 
}
#daily-quiz-modal .quiz-action-button .icon-after { margin-left: var(--spacing-xs); }
#daily-quiz-modal .quiz-result-display-area { 
    text-align: center; 
    padding: var(--spacing-lg) var(--spacing-md); 
}
#daily-quiz-modal .quiz-result-card { 
    background-color: var(--quiz-color-surface-raised); 
    border-radius: var(--border-radius-lg); 
    padding: var(--spacing-lg) var(--spacing-md) var(--spacing-xl); 
    box-shadow: var(--shadow-lg); 
    opacity: 0; transform: translateY(20px) scale(0.98); 
    animation: quizResultCardAppear 0.6s var(--transition-quiz-timing) 0.1s forwards; 
}
@keyframes quizResultCardAppear { to { opacity: 1; transform: translateY(0) scale(1); } }
#daily-quiz-modal .quiz-result-card-title { 
    font-family: var(--font-ui-quiz); 
    font-size: clamp(1rem, 2.5vw, 1.2rem); 
    color: var(--text-medium); text-transform: uppercase; 
    letter-spacing: 1px; margin-bottom: var(--spacing-lg); font-weight: 600; 
}
#daily-quiz-modal .quiz-result-icon-container { 
    margin-bottom: var(--spacing-md); min-height: 70px; 
    display: flex; justify-content: center; align-items: center; 
}
#daily-quiz-modal .quiz-result-icon-container i { 
    font-size: clamp(3rem, 8vw, 3.8rem); opacity: 0; 
    transform: rotateY(180deg) scale(0.6); 
    animation: quizIconFlipIn var(--transition-duration-normal) var(--transition-quiz-timing) forwards; 
}
#daily-quiz-modal .quiz-result-icon-container.rank-splus i,
#daily-quiz-modal .quiz-result-icon-container.rank-s i { color: #ffc107; animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-aplus i { color: var(--quiz-color-accent-primary); animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-a i { color: #6f42c1; animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-bplus i { color: #fd7e14; animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-b i { color: var(--quiz-color-correct); animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-c i { color: #17a2b8; animation-delay: 0.4s; }
#daily-quiz-modal .quiz-result-icon-container.rank-d i,
#daily-quiz-modal .quiz-result-icon-container.rank-e i { color: var(--text-secondary); animation-delay: 0.4s; }
@keyframes quizIconFlipIn { 
    0% { opacity: 0; transform: rotateY(180deg) scale(0.6); } 
    100% { opacity: 1; transform: rotateY(0deg) scale(1); } 
}
#daily-quiz-modal .quiz-result-rank-title { 
    font-family: var(--font-ui-quiz); 
    font-size: clamp(1.3rem, 3.8vw, 1.7rem); 
    font-weight: 700; margin-bottom: var(--spacing-xs); 
    color: var(--text-dark); opacity: 0; transform: translateY(12px); 
    animation: quizTextAppear 0.5s var(--transition-quiz-timing) 0.7s forwards; 
}
#daily-quiz-modal .quiz-result-rank-title.rank-splus { color: #d35400; }
#daily-quiz-modal .quiz-result-rank-title.rank-s { color: var(--quiz-color-accent-secondary); }
#daily-quiz-modal .quiz-final-score-display { 
    margin-bottom: var(--spacing-md); opacity: 0; transform: translateY(12px); 
    animation: quizTextAppear 0.5s var(--transition-quiz-timing) 0.9s forwards; 
}
#daily-quiz-modal .quiz-final-score-label { 
    font-size: clamp(0.6rem, 1.7vw, 0.65rem); 
    color: var(--text-medium); text-transform: uppercase; 
    letter-spacing: 0.8px; display: block; margin-bottom: -5px; font-weight: 600; 
}
#daily-quiz-modal #quiz-final-score-value { 
    font-family: var(--font-ui-quiz);
    font-size: clamp(3rem, 8vw, 4rem); 
    font-weight: 700; color: var(--text-dark); line-height: 1; display: inline-block; 
}
#daily-quiz-modal .quiz-total-questions-label { 
    font-family: var(--font-ui-quiz); font-size: clamp(1rem, 2.5vw, 1.3rem); 
    font-weight: 600; color: var(--text-medium); 
    margin-left: calc(var(--spacing-unit) * 0.5); 
}
#daily-quiz-modal .quiz-result-message { 
    font-size: clamp(0.85rem, 2.2vw, 0.95rem); 
    color: var(--text-medium); line-height: 1.6; 
    min-height: 2.8em; margin-bottom: var(--spacing-lg); 
    padding: 0 var(--spacing-xs); opacity: 0; transform: translateY(12px); 
    animation: quizTextAppear 0.5s var(--transition-quiz-timing) 1.1s forwards; 
    font-weight: 500; 
}
@keyframes quizTextAppear { to { opacity: 1; transform: translateY(0); } }
#daily-quiz-modal #quiz-finish-button {
    opacity: 0; transform: translateY(15px); 
    animation: quizButtonAppear 0.5s var(--transition-quiz-timing) 1.4s forwards; 
}
@keyframes quizButtonAppear { to { opacity: 1; transform: translateY(0); } }

@media (max-width: 768px) {
    html { font-size: 15px; }
    #difficulty-selection-screen { padding:var(--spacing-lg); max-width:95vw; }
    .difficulty-title { font-size:2em; }
    #difficulty-selection-screen h2 { font-size:1.3em; }
    .button-difficulty { font-size:1em; padding:var(--spacing-md); }
    .game-container { padding:var(--spacing-xs); margin-top:var(--spacing-sm); }
    .game-header { padding:var(--spacing-sm); margin-bottom:var(--spacing-md); }
    .header-title-wrapper { margin-bottom:var(--spacing-sm); }
    .game-main-title { font-size:1.8em; }
    .game-subtitle { font-size:0.8em; }
    .status-and-character-section { grid-template-columns:1fr; text-align:center; }
    .character-display { margin:0 auto var(--spacing-md) auto; }
    .character-image-container { width:120px; height:120px; }
    .params { grid-template-columns:repeat(2, 1fr); }
    .action-buttons-grid { grid-template-columns:1fr; }
    .action-buttons-grid button { font-size:1em; padding:var(--spacing-md); min-height: 56px; }
    .modal-content { padding:var(--spacing-md) var(--spacing-lg); max-width:95vw; }
    .modal-content h2 { font-size:1.3em; }
    .result-narrative { font-size:1em !important; min-height:60px; }
    .header-info-bar { align-items: center; } 
    .shop-open-button { margin-left: var(--spacing-sm); flex-grow: 0; padding: var(--spacing-sm); }
    .header-quiz-button { margin-right: var(--spacing-sm); padding: var(--spacing-sm); font-size: 1.2em; }
    .info-item { padding: var(--spacing-sm); font-size: 0.9em; }

    #daily-quiz-modal .quiz-modal-content { max-width: 95vw; padding: var(--spacing-md); } /* スマホではパディング少し増やす */
    #daily-quiz-modal .quiz-game-title { font-size: clamp(1.4rem, 3.8vw, 1.7rem); }
    #daily-quiz-modal .quiz-header-info-bar { flex-direction: row; align-items: center; gap: var(--spacing-sm); }
    #daily-quiz-modal .quiz-current-score-display { text-align: right; font-size: 0.9em; }
    #daily-quiz-modal .quiz-progress-text {font-size: 0.85em;}
    #daily-quiz-modal .quiz-choices-container { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--spacing-sm); }
    #daily-quiz-modal .quiz-choices-container button { padding: var(--spacing-md); min-height: 56px; font-size: 0.9em;}
    #daily-quiz-modal .quiz-message-bubble { font-size: clamp(1rem, 2.6vw, 1.1rem); padding: var(--spacing-md); }
    #daily-quiz-modal .quiz-action-button { font-size: 0.9em; padding: var(--spacing-sm) var(--spacing-lg); }
}

@media (max-width: 480px) {
    html { font-size: 14px; }
    body { padding: var(--spacing-xs); }
    #difficulty-selection-screen { padding:var(--spacing-md); }
    .difficulty-title { font-size:1.6em; }
    .difficulty-subtitle { font-size:0.8em; }
    #difficulty-selection-screen h2 { font-size:1.1em; }
    .button-difficulty { font-size:0.9em; }
    .button-difficulty small { font-size:0.7em; }
    .game-container { border-radius:var(--border-radius-md); padding: var(--spacing-xs); }
    .header-info-bar { flex-direction:column; align-items:stretch; }
    .info-item { width:100%; justify-content:space-between; padding: var(--spacing-sm); font-size: 0.95em;}
    .shop-open-button { width:100%; margin-top:var(--spacing-sm); margin-left:0; padding: var(--spacing-md); font-size: 1em;}
    .header-quiz-button { width: 100%; margin-right: 0; margin-bottom: var(--spacing-sm); padding: var(--spacing-md); font-size: 1.3em;}
    .game-main-title { font-size:1.5em; }
    .game-subtitle { font-size:0.75em; }
    .character-image-container { width:100px; height:100px; }
    .params { grid-template-columns:1fr; }
    .params p[data-param] { font-size:0.9em; padding:var(--spacing-sm) var(--spacing-md); }
    .params p[data-param] span { font-size:1.05em; }
    section h2 { font-size:1.15em; }
    .log-section { padding:var(--spacing-sm); }
    #log-message-area { font-size:0.9em; padding:var(--spacing-sm); max-height:120px; }
    .modal-content { padding:var(--spacing-sm); }
    .modal-content h2 { font-size:1.2em; }
    .modal-content p { font-size:0.9em; }
    .result-narrative { font-size:0.95em !important; min-height:50px; }
    #restart-game-button { font-size:0.9em; padding: var(--spacing-sm) var(--spacing-md); }
    .modal-character-image { width:90px; height:90px; }
    #item-shop-list.item-shop-grid { grid-template-columns:1fr; }
    .item-card { padding:var(--spacing-sm); }
    .item-card h4 { font-size:1em; }
    .item-card p { font-size:0.75em; min-height:2.5em; }
    .action-buttons-grid button { font-size:1em; padding: var(--spacing-md); min-height: 60px; }

    #daily-quiz-modal .quiz-modal-content { padding: var(--spacing-sm); }
    #daily-quiz-modal .quiz-header-internal { padding: var(--spacing-sm) var(--spacing-xs); }
    #daily-quiz-modal .quiz-game-title { font-size: clamp(1.1rem, 3.2vw, 1.3rem); }
    #daily-quiz-modal .quiz-message-bubble { padding: var(--spacing-sm); font-size: clamp(0.9rem, 2.6vw, 1rem); }
    #daily-quiz-modal .quiz-choices-container { grid-template-columns: 1fr; gap: calc(var(--spacing-unit) * 0.75); }
    #daily-quiz-modal .quiz-choices-container button { min-height: 52px; font-size: clamp(0.85rem, 2.4vw, 0.95rem); padding: var(--spacing-sm); }
    #daily-quiz-modal .quiz-result-rank-title { font-size: clamp(1.1rem, 3.5vw, 1.4rem); }
    #daily-quiz-modal #quiz-final-score-value { font-size: clamp(2.8rem, 7.5vw, 3.8rem); }
    #daily-quiz-modal .quiz-action-button { padding: var(--spacing-sm) var(--spacing-md); font-size: 0.9em; }
}
